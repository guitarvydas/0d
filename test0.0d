function route (𝜌sendProcedure) {
    synonym ❲deferred message stack❳ ≣ [] {
        ∀ š.routingMap 𝜏connection {
            #tag 𝜏connection.direction {
                ▫across ▫up {
                    synonym ❲output message❳ ≣ 𝜏connection.sender.outputs {
                        ❲deferred message stack❳/push (⎨target message⎬ [{connection.receiver message}])
                    }
		}
                ▫down ▫passThrough {}
            }
         }
	∀ ❲deferred message stack❳ 𝜏pair {
	    𝜏pair.target/handle (𝜏pair.message 𝜌sendProcedure)
	}
    }
}

